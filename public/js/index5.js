import{a as u,L as V,d as c,e as r,l as v,k as n,h as s,O as A,p as N,f as O,q as G,i as H,F as Q,g as D,_ as K,n as k,M as W,P as T,E as I}from"./index.js";import{h as d,k as X}from"./db.js";const Y={style:{height:"80vh","margin-top":"10px","margin-bottom":"5px"}},Z={style:{height:"80vh","margin-top":"10px","margin-bottom":"5px"}},ee={key:0},oe={__name:"index",setup(te){const a=u(window.localStorage.getItem("json-configKey")||""),o=u(""),g=u("json"),y=u("json"),m=u(!0);let i=[];const w=()=>{if(a.value){let e=V(d(),a.value);return e?Object.keys(e).map(t=>({value:a.value+"."+t,label:a.value+"."+t})):i}else return Object.keys(d()||{}).map(e=>({value:e,label:e}))};i=w();const J=(e,t)=>{i=w(),console.log(i);const b=e?i.filter(h=>h.value.toLowerCase().indexOf(e.toLowerCase())===0):i;t(b)},B=()=>{i=w()},E=()=>{try{if(a.value){let e=d();p.value==="json"||y.value=="json"?T(e,a.value,JSON.parse(o.value)):T(e,a.value,o.value),X(e)}I.success("保存成功")}catch(e){I.error("保存失败，不满足json格式"+e.message)}},x=()=>{if(a.value){let e=d(),t=V(e,a.value);typeof t=="object"?(o.value=JSON.stringify(t,null,2),y.value="json",p.value="json",g.value="json"):(o.value=t,y.value="text",p.value="text",g.value="text"),C(),window.localStorage.setItem("json-configKey",a.value)}},C=()=>{m.value=!1,setTimeout(()=>{m.value=!0},100)},p=u(""),U=V(d(),"switchLanguage")||[{value:"python",label:"python"},{value:"javascript",label:"javascript"},{value:"json",label:"json"},{value:"text",label:"text"}],F=e=>{g.value=e,C()},f=u(JSON.parse(window.localStorage.getItem("json-sfcSwitch"))||!1),j=u(!0),M=e=>{window.localStorage.setItem("json-sfcSwitch",e)};let _=null;const P=e=>{o.value=e,console.log(e),_!=null&&(clearTimeout(_),_=null),j.value=!1,_=setTimeout(()=>{j.value=!0},300)};return console.log("hello11111",a.value),a.value&&x(),(e,t)=>{const b=c("el-autocomplete"),h=c("el-button"),$=c("el-option"),q=c("el-select"),R=c("el-switch"),S=c("el-col"),L=c("el-row"),z=c("el-card");return r(),v(z,{style:{margin:"5px"}},{default:n(()=>[s(b,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),"fetch-suggestions":J,clearable:"",placeholder:"Please Input",style:{width:"50vh"},onKeyup:A(x,["enter"]),onSelect:B},null,8,["modelValue","onKeyup"]),s(h,{type:"primary",onClick:x,style:{"margin-right":"5px","margin-left":"5px"}},{default:n(()=>[N(" 加载 ")]),_:1}),s(h,{type:"primary",onClick:E,style:{"margin-right":"5px"}},{default:n(()=>[N(" 保存 ")]),_:1}),s(q,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),placeholder:"语法高亮",onChange:F},{default:n(()=>[(r(!0),O(Q,null,G(H(U),l=>(r(),v($,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(R,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=l=>f.value=l),"active-text":"开启sfc调试","inactive-text":"关闭sfc调试",onChange:M},null,8,["modelValue"]),f.value?(r(),v(L,{key:1,gutter:20},{default:n(()=>[s(S,{span:12},{default:n(()=>[D("div",Z,[m.value?(r(),v(K,{key:0,onChangeData:P,language:g.value,code:o.value},null,8,["language","code"])):k("",!0)])]),_:1}),s(S,{span:12},{default:n(()=>[f.value&&j.value?(r(),O("div",ee,[s(W,{sfc:o.value},null,8,["sfc"])])):k("",!0)]),_:1})]),_:1})):(r(),v(L,{key:0},{default:n(()=>[s(S,{span:24},{default:n(()=>[D("div",Y,[m.value?(r(),v(K,{key:0,onChangeData:t[3]||(t[3]=l=>{o.value=l}),language:g.value,code:o.value},null,8,["language","code"])):k("",!0)])]),_:1})]),_:1}))]),_:1})}}};export{oe as default};
