import{a as u,T as V,U as d,h as c,i as r,s as v,q as n,l as s,X as Y,x as N,j as D,y as Z,n as z,F as A,k as K,_ as O,v as k,V as G,Y as T,Z as H,E as I}from"./index.js";const Q={style:{height:"80vh","margin-top":"10px","margin-bottom":"5px"}},W={style:{height:"80vh","margin-top":"10px","margin-bottom":"5px"}},ee={key:0},te={__name:"index",setup(le){const a=u(window.localStorage.getItem("json-configKey")||""),o=u(""),g=u("json"),y=u("json"),m=u(!0);let i=[];const w=()=>{if(a.value){let e=V(d(),a.value);return e?Object.keys(e).map(l=>({value:a.value+"."+l,label:a.value+"."+l})):i}else return Object.keys(d()||{}).map(e=>({value:e,label:e}))};i=w();const J=(e,l)=>{i=w(),console.log(i);const b=e?i.filter(h=>h.value.toLowerCase().indexOf(e.toLowerCase())===0):i;l(b)},B=()=>{i=w()},U=()=>{try{if(a.value){let e=d();p.value==="json"||y.value=="json"?T(e,a.value,JSON.parse(o.value)):T(e,a.value,o.value),H(e)}I.success("保存成功")}catch(e){I.error("保存失败，不满足json格式"+e.message)}},x=()=>{if(a.value){let e=d(),l=V(e,a.value);typeof l=="object"?(o.value=JSON.stringify(l,null,2),y.value="json",p.value="json",g.value="json"):(o.value=l,y.value="text",p.value="text",g.value="text"),console.log(o.value),C(),window.localStorage.setItem("json-configKey",a.value)}},C=()=>{m.value=!1,setTimeout(()=>{m.value=!0},100)},p=u(""),E=V(d(),"switchLanguage")||[{value:"python",label:"python"},{value:"javascript",label:"javascript"},{value:"json",label:"json"},{value:"text",label:"text"}],F=e=>{g.value=e,C()},f=u(JSON.parse(window.localStorage.getItem("json-sfcSwitch"))||!1),j=u(!0),$=e=>{window.localStorage.setItem("json-sfcSwitch",e)};let _=null;const q=e=>{o.value=e,console.log(e),_!=null&&(clearTimeout(_),_=null),j.value=!1,_=setTimeout(()=>{j.value=!0},300)};return console.log("hello11111",a.value),a.value&&x(),(e,l)=>{const b=c("el-autocomplete"),h=c("el-button"),M=c("el-option"),P=c("el-select"),R=c("el-switch"),S=c("el-col"),L=c("el-row"),X=c("el-card");return r(),v(X,{style:{margin:"5px"}},{default:n(()=>[s(b,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value=t),"fetch-suggestions":J,clearable:"",placeholder:"Please Input",style:{width:"50vh"},onKeyup:Y(x,["enter"]),onSelect:B},null,8,["modelValue","onKeyup"]),s(h,{type:"primary",onClick:x,style:{"margin-right":"5px","margin-left":"5px"}},{default:n(()=>[N(" 加载 ")]),_:1}),s(h,{type:"primary",onClick:U,style:{"margin-right":"5px"}},{default:n(()=>[N(" 保存 ")]),_:1}),s(P,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=t=>p.value=t),placeholder:"语法高亮",onChange:F},{default:n(()=>[(r(!0),D(A,null,Z(z(E),t=>(r(),v(M,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(R,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=t=>f.value=t),"active-text":"开启sfc调试","inactive-text":"关闭sfc调试",onChange:$},null,8,["modelValue"]),f.value?(r(),v(L,{key:1,gutter:20},{default:n(()=>[s(S,{span:12},{default:n(()=>[K("div",W,[m.value?(r(),v(O,{key:0,onChangeData:q,language:g.value,code:o.value},null,8,["language","code"])):k("",!0)])]),_:1}),s(S,{span:12},{default:n(()=>[f.value&&j.value?(r(),D("div",ee,[s(G,{sfc:o.value},null,8,["sfc"])])):k("",!0)]),_:1})]),_:1})):(r(),v(L,{key:0},{default:n(()=>[s(S,{span:24},{default:n(()=>[K("div",Q,[m.value?(r(),v(O,{key:0,onChangeData:l[3]||(l[3]=t=>{o.value=t}),language:g.value,code:o.value},null,8,["language","code"])):k("",!0)])]),_:1})]),_:1}))]),_:1})}}};export{te as default};
